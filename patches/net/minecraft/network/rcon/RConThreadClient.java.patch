--- a/net/minecraft/network/rcon/RConThreadClient.java
+++ b/net/minecraft/network/rcon/RConThreadClient.java
@@ -43,7 +43,8 @@
             {
                 if (!this.running)
                 {
-                    return;
+                    // [CM] return;
+                    break;
                 }
 
                 BufferedInputStream bufferedinputstream = new BufferedInputStream(this.clientSocket.getInputStream());
@@ -56,7 +57,8 @@
 
                     if (k != i - 4)
                     {
-                        return;
+                        // [CM] return;
+                        break;
                     }
 
                     j = j + 4;
@@ -109,27 +111,30 @@
             }
             catch (SocketTimeoutException var17)
             {
-                return;
+                //return;
             }
             catch (IOException var18)
             {
-                return;
+                //return;
             }
             catch (Exception exception1)
             {
                 LOGGER.error("Exception whilst parsing RCON input", (Throwable)exception1);
-                return;
+                //return;
             }
             finally
             {
-                this.closeSocket();
+                //this.closeSocket();
             }
 
-            return;
+            //return;
+            break;
         }
+        this.closeSocket();
+        this.running = false;
     }
 
-    private void sendResponse(int p_72654_1_, int p_72654_2_, String message) throws IOException
+    private synchronized void sendResponse(int p_72654_1_, int p_72654_2_, String message) throws IOException
     {
         ByteArrayOutputStream bytearrayoutputstream = new ByteArrayOutputStream(1248);
         DataOutputStream dataoutputstream = new DataOutputStream(bytearrayoutputstream);
@@ -150,15 +155,35 @@
 
     private void sendMultipacketResponse(int p_72655_1_, String p_72655_2_) throws IOException
     {
+        this.sendMultipacketMessage(p_72655_1_, p_72655_2_, 0);
+    }
+    
+    public void sendMessageCarpetChatBridge(String p_72655_2_)
+    {
+        if (!this.running)
+            return;
+        try
+        {
+            this.sendMultipacketMessage(0, p_72655_2_, 1);
+        }
+        catch (IOException e)
+        {
+            this.running = false;
+            this.closeSocket();
+        }
+    }
+    
+    private void sendMultipacketMessage(int p_72655_1_, String p_72655_2_, int p_72655_3_) throws IOException
+    {
         int i = p_72655_2_.length();
-
+        
         while (true)
         {
             int j = 4096 <= i ? 4096 : i;
-            this.sendResponse(p_72655_1_, 0, p_72655_2_.substring(0, j));
+            this.sendResponse(p_72655_1_, p_72655_3_, p_72655_2_.substring(0, j));
             p_72655_2_ = p_72655_2_.substring(j);
             i = p_72655_2_.length();
-
+            
             if (0 == i)
             {
                 break;
